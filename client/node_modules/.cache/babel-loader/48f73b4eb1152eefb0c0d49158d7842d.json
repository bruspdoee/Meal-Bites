{"ast":null,"code":"'use strict';\n\nvar through = require('through2');\n\nvar writeDir = require('./write-dir');\n\nvar writeStream = require('./write-stream');\n\nvar writeBuffer = require('./write-buffer');\n\nvar writeSymbolicLink = require('./write-symbolic-link');\n\nvar fo = require('../../file-operations');\n\nfunction writeContents(optResolver) {\n  function writeFile(file, enc, callback) {\n    // Write it as a symlink\n    if (file.isSymbolic()) {\n      return writeSymbolicLink(file, optResolver, onWritten);\n    } // If directory then mkdirp it\n\n\n    if (file.isDirectory()) {\n      return writeDir(file, optResolver, onWritten);\n    } // Stream it to disk yo\n\n\n    if (file.isStream()) {\n      return writeStream(file, optResolver, onWritten);\n    } // Write it like normal\n\n\n    if (file.isBuffer()) {\n      return writeBuffer(file, optResolver, onWritten);\n    } // If no contents then do nothing\n\n\n    if (file.isNull()) {\n      return onWritten();\n    } // This is invoked by the various writeXxx modules when they've finished\n    // writing the contents.\n\n\n    function onWritten(writeErr) {\n      var flags = fo.getFlags({\n        overwrite: optResolver.resolve('overwrite', file),\n        append: optResolver.resolve('append', file)\n      });\n\n      if (fo.isFatalOverwriteError(writeErr, flags)) {\n        return callback(writeErr);\n      }\n\n      callback(null, file);\n    }\n  }\n\n  return through.obj(writeFile);\n}\n\nmodule.exports = writeContents;","map":null,"metadata":{},"sourceType":"script"}