{"ast":null,"code":"'use strict';\n\nvar through = require('through2');\n\nvar fo = require('../file-operations');\n\nfunction resolveSymlinks(optResolver) {\n  // A stat property is exposed on file objects as a (wanted) side effect\n  function resolveFile(file, enc, callback) {\n    fo.reflectLinkStat(file.path, file, onReflect);\n\n    function onReflect(statErr) {\n      if (statErr) {\n        return callback(statErr);\n      }\n\n      if (!file.stat.isSymbolicLink()) {\n        return callback(null, file);\n      }\n\n      var resolveSymlinks = optResolver.resolve('resolveSymlinks', file);\n\n      if (!resolveSymlinks) {\n        return callback(null, file);\n      } // Get target's stats\n\n\n      fo.reflectStat(file.path, file, onReflect);\n    }\n  }\n\n  return through.obj(resolveFile);\n}\n\nmodule.exports = resolveSymlinks;","map":null,"metadata":{},"sourceType":"script"}