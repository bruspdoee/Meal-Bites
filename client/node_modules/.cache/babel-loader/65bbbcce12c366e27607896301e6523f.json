{"ast":null,"code":"'use strict';\n\nvar through = require('through2');\n\nvar sourcemap = require('vinyl-sourcemap');\n\nfunction sourcemapStream(optResolver) {\n  function saveSourcemap(file, enc, callback) {\n    var self = this;\n    var srcMap = optResolver.resolve('sourcemaps', file);\n\n    if (!srcMap) {\n      return callback(null, file);\n    }\n\n    var srcMapLocation = typeof srcMap === 'string' ? srcMap : undefined;\n    sourcemap.write(file, srcMapLocation, onWrite);\n\n    function onWrite(sourcemapErr, updatedFile, sourcemapFile) {\n      if (sourcemapErr) {\n        return callback(sourcemapErr);\n      }\n\n      self.push(updatedFile);\n\n      if (sourcemapFile) {\n        self.push(sourcemapFile);\n      }\n\n      callback();\n    }\n  }\n\n  return through.obj(saveSourcemap);\n}\n\nmodule.exports = sourcemapStream;","map":null,"metadata":{},"sourceType":"script"}