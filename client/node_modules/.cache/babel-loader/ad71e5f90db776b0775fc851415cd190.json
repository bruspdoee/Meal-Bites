{"ast":null,"code":"'use strict';\n\nvar filter = require('through2-filter').obj;\n\nvar stringify = require(\"json-stable-stringify-without-jsonify\");\n\nvar ES6Set;\n\nif (typeof global.Set === 'function') {\n  ES6Set = global.Set;\n} else {\n  ES6Set = function ES6Set() {\n    this.keys = [];\n    this.has = function (val) {\n      return this.keys.indexOf(val) !== -1;\n    }, this.add = function (val) {\n      this.keys.push(val);\n    };\n  };\n}\n\nfunction prop(propName) {\n  return function (data) {\n    return data[propName];\n  };\n}\n\nmodule.exports = unique;\n\nfunction unique(propName, keyStore) {\n  keyStore = keyStore || new ES6Set();\n  var keyfn = stringify;\n\n  if (typeof propName === 'string') {\n    keyfn = prop(propName);\n  } else if (typeof propName === 'function') {\n    keyfn = propName;\n  }\n\n  return filter(function (data) {\n    var key = keyfn(data);\n\n    if (keyStore.has(key)) {\n      return false;\n    }\n\n    keyStore.add(key);\n    return true;\n  });\n}","map":null,"metadata":{},"sourceType":"script"}