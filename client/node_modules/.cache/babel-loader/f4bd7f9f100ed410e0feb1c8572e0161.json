{"ast":null,"code":"'use strict';\n\nvar through = require('through2');\n\nvar mkdirp = require('./mkdirp');\n\nfunction toFunction(dirpath) {\n  function stringResolver(chunk, callback) {\n    callback(null, dirpath);\n  }\n\n  return stringResolver;\n}\n\nfunction define(options) {\n  function mkdirpStream(resolver) {\n    // Handle resolver that's just a dirpath\n    if (typeof resolver === 'string') {\n      resolver = toFunction(resolver);\n    }\n\n    function makeFileDirs(chunk, enc, callback) {\n      resolver(chunk, onDirpath);\n\n      function onDirpath(dirpathErr, dirpath, mode) {\n        if (dirpathErr) {\n          return callback(dirpathErr);\n        }\n\n        mkdirp(dirpath, mode, onMkdirp);\n      }\n\n      function onMkdirp(mkdirpErr) {\n        if (mkdirpErr) {\n          return callback(mkdirpErr);\n        }\n\n        callback(null, chunk);\n      }\n    }\n\n    return through(options, makeFileDirs);\n  }\n\n  return mkdirpStream;\n}\n\nmodule.exports = define();\nmodule.exports.obj = define({\n  objectMode: true,\n  highWaterMark: 16\n});","map":null,"metadata":{},"sourceType":"script"}