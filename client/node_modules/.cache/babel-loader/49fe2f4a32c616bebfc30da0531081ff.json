{"ast":null,"code":"'use strict';\n\nvar assert = require('assert');\n\nvar metadata = require('./helpers/metadata');\n\nfunction set(name, fn) {\n  assert(name, 'Task name must be specified');\n  assert(typeof name === 'string', 'Task name must be a string');\n  assert(typeof fn === 'function', 'Task function must be specified');\n\n  function taskWrapper() {\n    return fn.apply(this, arguments);\n  }\n\n  function unwrap() {\n    return fn;\n  }\n\n  taskWrapper.unwrap = unwrap;\n  taskWrapper.displayName = name;\n  var meta = metadata.get(fn) || {};\n  var nodes = [];\n\n  if (meta.branch) {\n    nodes.push(meta.tree);\n  }\n\n  var task = this._registry.set(name, taskWrapper) || taskWrapper;\n  metadata.set(task, {\n    name: name,\n    orig: fn,\n    tree: {\n      label: name,\n      type: 'task',\n      nodes: nodes\n    }\n  });\n}\n\nmodule.exports = set;","map":null,"metadata":{},"sourceType":"script"}